services:
  # Web Service (Backend + Frontend)
  - type: web
    name: geld
    env: node
    region: oregon
    plan: free
    buildCommand: cd client && npm ci && npm run build && cd ../server && npm ci && npm run build
    startCommand: cd server && npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: JWT_SECRET
        value: super-secret-jwt-key-for-social-tracker-app-2024
      - key: TMDB_API_KEY
        value: eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmNDM3MzI3Y2Y5ZDI0YmNmMWJhODNlNTA1ZjhlMGEwNyIsIm5iZiI6MTc2OTYyMjYzNy4xOTUwMDAyLCJzdWIiOiI2OTdhNGM2ZDExM2YwNDkzYzExMmY2Y2EiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.cGdshBSCvpMofvGRBL3-GsEctxy2Gx_Ju6ds0BE5Mqo
      - key: GEMINI_API_KEY
        value: AIzaSyC760TcZEwEMgew4BwVwXpUR8lHDVabku8
      - key: LASTFM_API_KEY
        value: 1fde97017f141e52fc703f83f29b5138
      - key: GOOGLE_PLACES_API_KEY
        value: AIzaSyDsmiyvotuJbEHVbjjELwQrJdexMd91zAc
      - key: FOURSQUARE_API_KEY
        value: fsq3YckbXHBJjWaPM0vuXzPZp8yyYJhKXdcDaLUvC6ALnns=
      - key: DATABASE_URL
        fromDatabase:
          name: geld-db
          property: connectionString

databases:
  - name: geld-db
    databaseName: geld
    user: geld
    plan: free
    region: oregon
